---
layout: page
---

# API Reference: Works Resource

The `works` resource represents movies and series in the Holiday Flicks API catalogue. This reference provides detailed information on the available endpoints, parameters, request and response formats, and the data model for `works`.

## Endpoints Overview

- [**GET `/works`**](#get-works) - Retrieve a list of all works.
- [**GET `/works/{id}`**](#get-worksid) - Retrieve details of a specific work by ID.
- [**POST `/works`**](#post-works) - Create a new work entry.
- [**PUT `/works/{id}`**](#put-worksid) - Update an existing work.
- [**DELETE `/works/{id}`**](#delete-worksid) - Delete a work entry.

## Authentication

All requests to the `works` resource require an API key included in the `Authorization` header.

**Header Format**

```makefile
Authorization: Bearer YOUR_API_KEY
```

## Endpoint Details

### GET `/works`

Retrieves a list of all works in the catalogue.

**Query Parameters (Optional)**

- `genre` (string): Filter works by genre.
- `release_year` (integer): Filter works by release year (e.g., `2021`).
- `platform` (string): Filter works by platform (e.g., `Netflix`).
- `loc_id` (integer): Filter works by location ID.

**Example Request**

```bash
GET /works?genre=Thriller
```

**Example Response**

```json
[
  {
    "id": 3,
    "title": "Stillwater",
    "source": "original script",
    "release_date": "2021",
    "platform": "Netflix,Prime",
    "genre": "Thriller",
    "loc_id": 3
  }
]
```

### GET `/works/{id}`

Retrieves detailed information about a specific work by its ID.

**Path Parameters**

- `id` (integer): The unique identifier of the work.

**Example Request**

```bash
GET /works/2
```

**Example Response**

```json
{
  "id": 2,
  "title": "The Count of Monte Cristo",
  "source": "The Count of Monte Cristo (novel)",
  "release_date": "2024",
  "platform": "coming soon",
  "genre": "Adventure",
  "loc_id": 4
}
```

### POST `/works`

Creates a new work entry in the catalogue.

**Request Headers**

- `Content-Type`: application/json
- `Authorization`: Bearer YOUR_API_KEY

**Fields:** Refer to the [Data Model: Location Object](#data-model-work-object) table for fields.

**Example Request**

```json
{
  "title": "New Movie Title",
  "source": "Original Script",
  "release_date": "2025",
  "platform": "Netflix",
  "genre": "Drama",
  "loc_id": 5
}
```

**Example Response**

```bash
Status Code: 201 Created
```

```json
{
  "id": 5,
  "title": "New Movie Title",
  "source": "Original Script",
  "release_date": "2025",
  "platform": "Netflix",
  "genre": "Drama",
  "loc_id": 5
}
```

### PUT `/works/{id}`

Updates an existing work entry.

**Path Parameters**

- `id` (integer): The unique identifier of the work to update.

**Request Headers**

- `Content-Type`: application/json
- `Authorization`: Bearer YOUR_API_KEY

**Request Body (JSON)**

Include only the fields you wish to update.

**Example Request**

```json
{
  "platform": "Netflix, Prime Video",
  "release_date": "2021"
}
```

**Example Response**

```bash
Status Code: 200 OK
```

```json
{
  "id": 3,
  "title": "Stillwater",
  "source": "original script",
  "release_date": "2021",
  "platform": "Netflix, Prime Video",
  "genre": "Thriller",
  "loc_id": 3
}
```

### DELETE `/works/{id}`

Deletes a work entry from the catalogue.

**Path Parameters**

- `id` (integer): The unique identifier of the work to delete.

**Example Request**

```bash
DELETE /works/5
```

**Example Response**

```bash
Status Code: 204 No Content
```

No body is returned.

## Data Model: Work Object

### Work Object: Fields and Specifications

| Field          | Type    | Description                                         |
|----------------|---------|-----------------------------------------------------|
| `id`           | integer | Unique identifier for the work. Generated by the server. |
| `title`        | string  | Title of the movie or series.                       |
| `source`       | string  | Origin of the work (e.g., novel, script).           |
| `release_date` | string  | Release year in YYYY format.                        |
| `platform`     | string  | Platforms where the work is available.              |
| `genre`        | string  | Genre of the work (e.g., Thriller, Adventure).      |
| `loc_id`       | integer | ID of the associated location (works:id).        |

### Field Requirements

- **POST `/works`:** All fields **except** `id` are **required** when creating a new work entry.
- **PUT `/works/{id}`:** All fields are **optional**. You can update any subset of the fields as needed.

**Notes:**
  
  - The `id` field is auto-generated by the server and should not be included in the request body.
  - The `loc_id` field must correspond to an existing `works:id` field, meaning the `id` of the associated work.
  - Verify that all required fields are provided and correctly formatted when creating resources.
  - The `platform` field may contain more than one platform, ie. `Netflix, Prime Video`. Separate by commas and when performing calls, append `_like` to `platform` such as `platform_like`.

## Common Response Codes

- **200 OK**: Request succeeded.
- **201 Created**: Resource successfully created.
- **204 No Content**: Resource successfully deleted.
- **400 Bad Request**: Invalid request parameters.
- **401 Unauthorized**: Authentication failed or not provided.
- **404 Not Found**: Resource not found.
- **500 Internal Server Error**: Server encountered an error.

## Error Handling

Errors are returned in JSON format with an error object.

**Error Response Format**

```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "Detailed error message."
  }
}
```

**Example of a 404 Error**

```json
{
  "error": {
    "code": "NOT_FOUND",
    "message": "The requested work with id 999 does not exist."
  }
}
```

## Notes

- **Pagination**: If the number of works is large, pagination parameters such as `page` and `limit` may be supported (check the API for details).
- **Data Validation**: All required fields should be provided and correctly formatted when creating or updating resources.
- **Rate Limiting**: Be aware of any rate limits applied to the API to prevent exceeding allowed usage.

## Examples in Different Programming Languages

### Fetching All Works Using Python

```python
import requests

headers = {
    'Authorization': 'Bearer YOUR_API_KEY'
}

response = requests.get('https://api.holidayflicks.com/v1/works', headers=headers)
works = response.json()

for work in works:
    print(f"{work['title']} ({work['release_date']}) - Genre: {work['genre']}")
```

### Fetching a Specific Work Using JavaScript (Fetch API)

```javascript
fetch('https://api.holidayflicks.com/v1/works/2', {
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY'
  }
})
.then(response => response.json())
.then(work => {
  console.log(`${work.title} (${work.release_date}) - Genre: ${work.genre}`);
})
.catch(error => console.error('Error:', error));
```

* **Explore More Endpoints:** Check out the API Reference for [/works](../api/works.md) or [/locations](../api/locations.md) to learn about other available endpoints and functionalities.
* **Explore Tutorials:** Learn how to [Find Movies by Location](../tutorials/find_movies_by_location.md) or [Filter Works by Genre or Platform](../tutorials/filter_works.md).